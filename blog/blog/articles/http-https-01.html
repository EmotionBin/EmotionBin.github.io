<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关于 https | 黄伟斌的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/img/avatar.jpg">
    <link rel="stylesheet" href="/blog/css/style.css">
    <meta name="description" content="冲冲冲，淦就完事了">
    
    <link rel="preload" href="/blog/assets/css/0.styles.f87ba6bf.css" as="style"><link rel="preload" href="/blog/assets/js/app.11eaa6f7.js" as="script"><link rel="preload" href="/blog/assets/js/2.74b5bf19.js" as="script"><link rel="preload" href="/blog/assets/js/24.2ca8ec0a.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.39c50713.js"><link rel="prefetch" href="/blog/assets/js/11.1756ef3d.js"><link rel="prefetch" href="/blog/assets/js/12.34c3b637.js"><link rel="prefetch" href="/blog/assets/js/13.af56dc0f.js"><link rel="prefetch" href="/blog/assets/js/14.df715967.js"><link rel="prefetch" href="/blog/assets/js/15.e7a68b1b.js"><link rel="prefetch" href="/blog/assets/js/16.bf3bb350.js"><link rel="prefetch" href="/blog/assets/js/17.37adb295.js"><link rel="prefetch" href="/blog/assets/js/18.9d38c2e9.js"><link rel="prefetch" href="/blog/assets/js/19.ea5501ab.js"><link rel="prefetch" href="/blog/assets/js/20.1c23923d.js"><link rel="prefetch" href="/blog/assets/js/21.ac11cb06.js"><link rel="prefetch" href="/blog/assets/js/22.aed0cfe2.js"><link rel="prefetch" href="/blog/assets/js/23.7a3361d8.js"><link rel="prefetch" href="/blog/assets/js/25.c22dceac.js"><link rel="prefetch" href="/blog/assets/js/26.1595e9e5.js"><link rel="prefetch" href="/blog/assets/js/27.bdc2a03b.js"><link rel="prefetch" href="/blog/assets/js/28.bafd22a7.js"><link rel="prefetch" href="/blog/assets/js/29.3fc1ea64.js"><link rel="prefetch" href="/blog/assets/js/3.168c0e15.js"><link rel="prefetch" href="/blog/assets/js/30.8b0ded56.js"><link rel="prefetch" href="/blog/assets/js/31.beb339fd.js"><link rel="prefetch" href="/blog/assets/js/32.3ec6ea80.js"><link rel="prefetch" href="/blog/assets/js/33.a7961f50.js"><link rel="prefetch" href="/blog/assets/js/34.66b47894.js"><link rel="prefetch" href="/blog/assets/js/35.5fdd5538.js"><link rel="prefetch" href="/blog/assets/js/36.85cbc0ce.js"><link rel="prefetch" href="/blog/assets/js/37.329c6aaf.js"><link rel="prefetch" href="/blog/assets/js/38.f452c830.js"><link rel="prefetch" href="/blog/assets/js/39.c16c6030.js"><link rel="prefetch" href="/blog/assets/js/4.f6488527.js"><link rel="prefetch" href="/blog/assets/js/40.d1f760c1.js"><link rel="prefetch" href="/blog/assets/js/41.57de51f5.js"><link rel="prefetch" href="/blog/assets/js/42.d8ba9086.js"><link rel="prefetch" href="/blog/assets/js/43.4f23320b.js"><link rel="prefetch" href="/blog/assets/js/44.b7797a28.js"><link rel="prefetch" href="/blog/assets/js/5.94131642.js"><link rel="prefetch" href="/blog/assets/js/6.22294c7e.js"><link rel="prefetch" href="/blog/assets/js/7.96080206.js"><link rel="prefetch" href="/blog/assets/js/8.ee4e8f06.js"><link rel="prefetch" href="/blog/assets/js/9.b080a929.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f87ba6bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">黄伟斌的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/blog/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/EmotionBin/vue-press-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/blog/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/EmotionBin/vue-press-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端琐事</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>跨端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/blog/articles/http-cache-01.html" class="sidebar-link">前端也要懂 HTTP 缓存机制</a></li><li><a href="/blog/blog/articles/http-https-01.html" aria-current="page" class="active sidebar-link">关于 https</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/blog/articles/http-https-01.html#http-协议" class="sidebar-link">http 协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/blog/articles/http-https-01.html#三次握手" class="sidebar-link">三次握手</a></li><li class="sidebar-sub-header"><a href="/blog/blog/articles/http-https-01.html#四次挥手" class="sidebar-link">四次挥手</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/blog/articles/http-https-01.html#对称加密" class="sidebar-link">对称加密</a></li><li class="sidebar-sub-header"><a href="/blog/blog/articles/http-https-01.html#非对称加密" class="sidebar-link">非对称加密</a></li><li class="sidebar-sub-header"><a href="/blog/blog/articles/http-https-01.html#对称加密-非对称加密" class="sidebar-link">对称加密 + 非对称加密</a></li><li class="sidebar-sub-header"><a href="/blog/blog/articles/http-https-01.html#对称加密-非对称加密-ca" class="sidebar-link">对称加密 + 非对称加密 + CA</a></li><li class="sidebar-sub-header"><a href="/blog/blog/articles/http-https-01.html#数字签名" class="sidebar-link">数字签名</a></li><li class="sidebar-sub-header"><a href="/blog/blog/articles/http-https-01.html#访问百度的过程" class="sidebar-link">访问百度的过程</a></li><li class="sidebar-sub-header"><a href="/blog/blog/articles/http-https-01.html#结束语" class="sidebar-link">结束语</a></li></ul></li><li><a href="/blog/blog/articles/cdn-01.html" class="sidebar-link">聊聊 CDN</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>架构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>demo合集</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="关于-https"><a href="#关于-https" class="header-anchor">#</a> 关于 https</h1> <h2 id="http-协议"><a href="#http-协议" class="header-anchor">#</a> http 协议</h2> <p>浏览器和服务器之间通信是通过<code>HTTP</code>协议，<code>HTTP</code>协议是<code>Hyper Text Transfer Protocol</code>（超文本传输协议），它是基于<code>TCP/IP</code>通信协议来传递数据的，目前比较常用的是<code>HTTP/1.1</code>，<code>HTTP</code>协议永远都是客户端发起请求，服务器回送响应。</p> <p><a href="https://s1.ax1x.com/2020/05/04/Y9QYAU.png" target="_blank" rel="noopener noreferrer"><img src="https://s1.ax1x.com/2020/05/04/Y9QYAU.png" alt="Y9QYAU.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <hr> <h3 id="三次握手"><a href="#三次握手" class="header-anchor">#</a> 三次握手</h3> <p>三次握手是指建立一个 <code>TCP</code> 连接时，需要客户端和服务器总共发送 3 个包。</p> <p><a href="https://s1.ax1x.com/2020/05/05/Yi8JB9.png" target="_blank" rel="noopener noreferrer"><img src="https://s1.ax1x.com/2020/05/05/Yi8JB9.png" alt="Yi8JB9.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>1. 第一次握手([SYN], Seq = x)</strong></p> <ul><li>客户端发送一个<code>SYN</code>标记的包，<code>Seq</code>初始序列号 x，发送完成后客户端进入<code>SYN_SEND</code>状态。</li></ul> <p><strong>2. 第二次握手([SYN,ACK], Seq = y, ACK = x + 1)</strong></p> <ul><li>服务器返回确认包(<code>ACK</code>)应答，同时还要发送一个<code>SYN</code>包回去。<code>ACK = x + 1</code>,表示确认收到(客户端发来的<code>Seq</code>值 + 1)，<code>Seq = y</code>, 表示让客户端确认是否能收到。发送完成后服务端进入<code>SYN_RCVD</code>状态。</li></ul> <p><strong>3. 第三次握手([ACK], ACK = y + 1)</strong></p> <ul><li>客户端再次发送确认包(<code>ACK</code>),<code>ACK = y + 1</code>, 表示确认收到服务器的包（服务端发来的<code>Seq</code>值 + 1）。客户端发送完毕后，进入<code>ESTABLISHED</code>状态，服务端接收到这个包，也进入<code>ESTABLISHED</code>状态, <code>TCP</code>握手结束。</li></ul> <p>可以用一种形象的方式来解释:</p> <ul><li>女朋友向程序员提出约会(Seq = x)的建议，然后女朋友进入<code>SYN_SEND</code>状态。</li> <li>程序员收到后同意了去约会(ACK = x + 1), 然后向女朋友建议去吃麻辣烫吧(Seq = y)，程序员进入<code>SYN_RCVD</code>状态。</li> <li>女朋友收到建议后，勉为其难的答应了，然后告诉程序员说 那好吧(ACK = y + 1)。女朋友就进入了<code>ESTABLISHED</code>状态， 程序员也进入了 <code>ESTABLISHED</code>状态，整个约会讨论结束。</li></ul> <hr> <h3 id="四次挥手"><a href="#四次挥手" class="header-anchor">#</a> 四次挥手</h3> <p><code>TCP</code>连接的断开需要发送四个包，所以称为四次挥手。</p> <p><a href="https://s1.ax1x.com/2020/05/05/YFS79K.png" target="_blank" rel="noopener noreferrer"><img src="https://s1.ax1x.com/2020/05/05/YFS79K.png" alt="YFS79K.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>1. 第一次挥手（[FIN], Seq = x）</strong></p> <ul><li>客户端发送一个 FIN 标记的包，告诉服务器需要关闭连接，表示自己不用发送数据了，但是还可以接收数据。发送完成后，客户端进入<code>FIN_WAIT_1</code>状态。</li></ul> <p><strong>2. 第二次挥手 ([ACK], ACK = x + 1)</strong></p> <ul><li>服务端发送一个<code>ACK</code>的确认包，告诉客户端接收到关闭的请求，但是还没有准备好。发送完成后，服务端进入<code>CLOSE_WAIT</code>状态，客户端收到这个包后，进入<code>FIN_WAIT_2</code>，等待服务器关闭连接。</li></ul> <p><strong>3. 第三次挥手 ([FIN], Seq = y)</strong></p> <ul><li>服务端准备好关闭连接时，发送<code>FIN</code>标记的包，告诉客户端准备关闭了。发送完成后，服务端进入<code>LAST_ACK</code>状态，等待客户端确认。</li></ul> <p><strong>4. 第四次挥手 ([ACK], ACK = y + 1)</strong></p> <ul><li>客户端接收到服务端的关闭请求，再发送<code>ACK</code>标记的确认包，进入<code>TIME_WAIT</code>状态，等待服务端可能请求重传的<code>ACK</code>包。</li> <li>服务端接收到<code>ACK</code>包后，关闭连接，进入<code>CLOSED</code>状态。</li> <li>客户端在等待固定时间(两个最大段生命周期)后，没有接收到服务的<code>ACK</code>包，认为服务器已关闭连接，自己也关闭连接，进入<code>CLOSED</code>状态。</li></ul> <p>四次挥手连接看起来挺复杂，其实认真看看也挺简单的，同样的比喻:</p> <ul><li>女朋友向程序员提出分手</li> <li>程序员告诉女朋友说，我知道了，但是要考虑一下</li> <li>程序员考虑清楚后，跟女朋友说那就分手吧</li> <li>女朋友接收到程序员的消息后，然后还在等程序员发挽留的消息，然而等了两天后没等到，就认为程序员是真的不会再发消息来了，于是就拉黑删除程序员，关闭连接了</li></ul> <p>虽然传统的<code>HTTP</code>协议解决了客户端和服务器通信的问题，但是<code>HTTP</code>协议在传输数据的时候，是以明文的形式来传输数据的，这就导致了在需要向服务端传输一些敏感的数据时，非常的不安全。例如，把用户的密码传输给服务器时，密码是明文的，谁都可以看到，这样还叫密码吗？所以，为了安全起见，就提出了在传输数据的时候加密传输。</p> <hr> <h2 id="对称加密"><a href="#对称加密" class="header-anchor">#</a> 对称加密</h2> <p>对称加密其实就是同一个密钥可以同时用作信息的加密和解密。废话不多说，来看个例子，假设现在有两个算法 f1 和 f2，f1 用于加密数据，f2 用于解密数据，下图会模拟使用对称加密的方式进行客户端与服务器的通信。</p> <p><a href="https://s1.ax1x.com/2020/05/04/Y9UvJx.png" target="_blank" rel="noopener noreferrer"><img src="https://s1.ax1x.com/2020/05/04/Y9UvJx.png" alt="Y9UvJx.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>客户端想要给服务器发送数据 data，这次不再是明文传输，而是使用了对称加密算法 f1 将数据 data 加密为 x，即<code>f1(k，data) = x</code>，将 x 传输给服务器</li> <li>服务器受到数据 x 后，使用对称加密算法 f2 进行解密，即<code>f2(k，x) = data</code></li> <li>服务器想要回给客服端 data1，也使用了对称加密算法 f1 对数据 data1 进行加密，即<code>f1(k，data1) = y</code>，将 y 传输给客户端</li> <li>客户端收到数据 y 后，使用对称加密算法 f2 解密数据 y，即<code>f2(k，y) = data1</code></li></ol> <p>整个通信过程完成，数据不再以明文的形式传输，实现了加密通信。但是这里的秘钥 k 只能有一个，为什么秘钥 k 只能有一个，因为服务器去定制秘钥 k 的时候，它不可能知道有多少个客户端，不可能为每个客户端都量身定制一个秘钥 k，如果有一亿个客户端呢，<strong>只有一个秘钥 k 就导致了每个人都知道这个秘钥 k，这样一来，加密了等于没加密</strong>，所以只使用对称加密也是不可取的。</p> <hr> <h2 id="非对称加密"><a href="#非对称加密" class="header-anchor">#</a> 非对称加密</h2> <p>非对称加密会有两个秘钥，一个是公钥一个是私钥，公钥与私钥是一对的，用公钥对数据进行加密，只有用对应的私钥才能解密，用私钥对数据进行加密，只有用对应的公钥才能解密。再来看个例子，假设算法 f 是非对称加密算法，<code>pk</code>是公钥，<code>sk</code>是私钥，<code>pk</code>和<code>sk</code>都存储在服务器中。</p> <p><a href="https://s1.ax1x.com/2020/05/04/Y90GtA.png" target="_blank" rel="noopener noreferrer"><img src="https://s1.ax1x.com/2020/05/04/Y90GtA.png" alt="Y90GtA.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>客户端向服务端发送请求获取公钥<code>pk</code></li> <li>服务器收到客服端请求，把<code>pk</code>给客户端</li> <li>客户端用公钥<code>pk</code>加密想要发送的数据 data，即<code>f(pk,data) = y</code>，将数据 y 传送给服务器</li> <li>服务器收到数据 y，用私钥<code>sk</code>解密 y，即<code>f(sk,y) = data</code>，获取到客户端发送的数据</li> <li>服务器要给客户端回信息 data1，用私钥<code>sk</code>进行加密，即<code>f(sk,data1) = y1</code>，将 y1 回送给客户端</li> <li>客户端收到信息 y1 后，用公钥<code>pk</code>进行解密，即<code>f(pk,y1) = data1</code></li></ol> <p>整个通信过程完成，使用了非对称加密，这种通信方式有没有漏洞呢，其实也是有的，同样的，<code>pk</code>和<code>sk</code>也只有一对，都存储在服务器，客户端向服务器索要公钥<code>pk</code>的时候，服务器并不知道客户端是谁，是好人还是坏人，所以每个人都可以拿到公钥<code>pk</code>，拿到<code>pk</code>后，客户端在发送数据的时候，经过了公钥<code>pk</code>加密，只要私钥<code>sk</code>不泄露，那么就是安全的，但是在服务器回信息的时候，使用的是私钥<code>sk</code>进行数据加密，前面说了每个人都可以拿到公钥<code>pk</code>，那么<strong>服务器回信息的时候，每个人都可以用拿到的公钥 pk 对信息进行解密</strong>，所以这个过程在服务器回信息的时候是不安全的，只使用非对称加密也是不可取的。</p> <hr> <h2 id="对称加密-非对称加密"><a href="#对称加密-非对称加密" class="header-anchor">#</a> 对称加密 + 非对称加密</h2> <p>如果只使用对称加密或者只使用非对称加密，都是不安全的，那么可不可以把两者都结合在一起，既使用对称加密又使用非对称加密。再来看个例子，假设现在有对称加密算法 F，非对称加密算法 f，公钥<code>pk</code>和私钥<code>sk</code>一对，都存储在服务器。</p> <p><a href="https://s1.ax1x.com/2020/05/04/Y9qsL8.png" target="_blank" rel="noopener noreferrer"><img src="https://s1.ax1x.com/2020/05/04/Y9qsL8.png" alt="Y9qsL8.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>客户端向服务端发送请求获取公钥<code>pk</code></li> <li>服务器收到客服端请求，把<code>pk</code>给客户端</li> <li>客户端生成随机字符串 num1，用公钥 pk 进行非对称加密后为 y，把 y 传输给服务器</li> <li>服务器收到数据 y，用私钥<code>sk</code>进行解密，得到字符串 num1，此时服务器回应 ok，这里的 ok 是抽象表示，就是告诉客户端我收到了你发过来的数据。<strong>从此开始，客户端与服务器后来的通信，都会用这个字符串 num1 作为秘钥进行对称加密</strong></li> <li>客户端将要发送的数据 data 以 num1 作为秘钥进行对称加密，即<code>F(num1，data) = x</code>，把 x 传输给服务器</li> <li>服务器收到数据 x 后进行解密，即<code>F(num1，x) = data</code>，拿到数据 data</li> <li>服务器要给客户端回信息 data1,将 data1 进行加密，即<code>F(num1,data1) = x1</code>，把 x1 传输给客户端</li> <li>客户端收到信息 x1，将 x1 解密，即<code>F(num1,x1) = data1</code>，拿到数据 data1</li></ol> <p>这个完整的通信过程结合了对称加密与非对称加密，看起来天衣无缝的通讯方式是不是已经很安全了呢，再看完下面这个例子就会明白。</p> <p><a href="https://s1.ax1x.com/2020/05/04/Y9L1Yj.png" target="_blank" rel="noopener noreferrer"><img src="https://s1.ax1x.com/2020/05/04/Y9L1Yj.png" alt="Y9L1Yj.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>在客户端向服务器发起请求的过程中，假设黑客直接介入，黑客也有自己的公钥<code>pk'</code>和私钥<code>sk'</code>。</p> <ol><li>客户端向服务端发送请求获取公钥<code>pk</code>，黑客介入，黑客很贼，它假装自己是一个无辜的良民，向服务器发送请求获取公钥<code>pk</code></li> <li>服务器收到请求，把<code>pk</code>返回，黑客又继续介入，成功拿到服务器公钥<code>pk</code>，将自己的公钥<code>pk'</code>给客户端，客户端拿到的是假的公钥<code>pk'</code>，但是它并不知道</li> <li>客户端生成随机字符串 num1，用假公钥<code>pk'</code>进行非对称加密后为 y'，把 y'传输给服务器，传输的过程中，黑客又介入，黑客用自己的私钥<code>sk'</code>解密 y'，成功拿到 num1，之后用公钥<code>pk</code>加密 num1 为数据 y，把 y 发送给服务器</li> <li>服务器收到信息后，返回 ok，黑客收到服务器的 ok，也告诉客户端 ok，从此用 num1 进行对称加密通信</li> <li>每次客户端和服务器的通信过程都会被黑客监听、窃取，这个过程一直持续。。。</li></ol> <p>看完这整个通信过程可以发现，每次客户端和服务器通信，都必须经过黑客，黑客在一开始就把真正的公钥<code>pk</code>掉包了，自己拿到了服务器真正的公钥<code>pk</code>，而返回给客户端假的公钥<code>pk'</code>，可怕的是客户端和服务器都无法察觉。从此开始，客户端发送的信息黑客都可以解密、篡改，并将篡改后的数据发送给服务器，这就是<strong>中间人攻击</strong>，很显然，这种通信方式也是非常不安全的。</p> <p>这里根据以上的加密方式小结一下：</p> <ul><li>明文 = 裸奔</li> <li>对称加密，key 唯一 = 明文</li> <li>非对称加密，Server -&gt; Client 不安全</li> <li>对称加密 + 非对称加密，中间人攻击</li></ul> <p>那么有没有一些比较安全的加密策略呢，答案是有的，请继续清下看。</p> <hr> <h2 id="对称加密-非对称加密-ca"><a href="#对称加密-非对称加密-ca" class="header-anchor">#</a> 对称加密 + 非对称加密 + CA</h2> <p><code>CA</code>是一个第三方的认证机构，是具有公信力的、权威的机构，可以被大家所信任的，那么就可以借助<code>CA</code>来协助我们完成安全的通信。先分析一下中间人攻击的原因所在，客户端在向服务器通信的第一步，也就是在索要公钥的时候就出现了问题，公钥被黑客掉包了，那么如何解决这个问题呢，答案就是利用<code>CA证书</code>，<code>CA</code>机构他也有自己的公钥和私钥，假设<code>CA</code>的公钥为<code>Cpk</code>，私钥为<code>Csk</code>，继续看下面这个例子</p> <p><a href="https://s1.ax1x.com/2020/05/04/YCP3Qg.png" target="_blank" rel="noopener noreferrer"><img src="https://s1.ax1x.com/2020/05/04/YCP3Qg.png" alt="YCP3Qg.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>客户端首次向服务器通信的时候不再直接请求公钥，而是请求数字证书，数字证书是由<code>CA</code>机构用<code>Csk</code>对<code>pk</code>加密生成的，存放在服务器，只有用<code>Cpk</code>解密证书才能获取公钥<code>pk</code>，假如客户端去向<code>CA</code>机构请求<code>Cpk</code>的时候，运气很不好，又遇到黑客劫持掉包，那么干脆就直接把<code>Cpk</code>写死在浏览器，就避免了掉包，所以浏览器会存储一些<code>CA</code>机构的信息，存储了大量<code>CA</code>机构的公钥，这些信息由浏览器自己来维护。上图的通信过程大致如下</p> <ol><li>客户端向服务器请求证书<code>licence</code></li> <li>服务器将证书返回给客户端</li> <li>客户端拿到证书后用<code>Cpk</code>解密获取公钥<code>pk</code></li> <li>以下通信过程同上，不再叙述。。。</li></ol> <p>采用这种通信方式的时候，假设中间人介入，当服务器返回证书<code>licence</code>给客户端时，中间人截获，它篡改了证书，把篡改后的证书给了客户端，这时候客户端收到证书，但是这时候它并不知道证书的真假，此时它可以用自己本身存储的<code>CA</code>机构的公钥<code>Cpk</code>去解密证书，如果证书是真的，就可以解密成功，假如证书是假的，解密就会出现问题，这时候浏览器就会提示不安全，如下图</p> <p><a href="https://s1.ax1x.com/2020/05/05/YPXDLq.png" target="_blank" rel="noopener noreferrer"><img src="https://s1.ax1x.com/2020/05/05/YPXDLq.png" alt="YPXDLq.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>出现上图的情况可能有以下两种：</p> <ol><li>黑客篡改了证书</li> <li>该网站使用的是自签名的证书，或者由不受信任的认证机构提供的签名</li> <li>网站的主机名与证书的主机名称不匹配</li> <li>证书过期了</li></ol> <p>关于自签名证书，其实就是自己制造的一个数字证书，因为我们自己的证书不属于浏览器认可的权威机构的范围内，所以浏览器也会发出安全警告。</p> <p>话说回来，上面分析了中间人篡改证书的方式几乎是不可行的，那么中间人在客户端拿到证书之后再进行介入呢。来分析一下，假设现在客户端已经拿到了数字证书，并用<code>CA</code>公钥<code>Cpk</code>解密拿到了公钥<code>pk</code>，开始生成随机数 num1，并用<code>pk</code>加密成数据 y 传输给服务器，这个时候就算中间人介入，他最多只能拿到公钥<code>pk</code>，所以他并不能解密数据 y，所以中间人无法操作。</p> <p>所以，使用 <code>对称加密 + 非对称加密 + CA机构</code> 这种通信方式是相对较安全的，这也是我们常说的<code>HTTPS</code>，但是不排除有更牛逼的黑客~</p> <hr> <h2 id="数字签名"><a href="#数字签名" class="header-anchor">#</a> 数字签名</h2> <p>数字签名顾名思义，就是电子签名，好比你写了一篇文章，然后在上面附上你的电子签名。</p> <p>假设有 A 和 B 两人，A 有两把钥匙，公钥和私钥，A 事先把公钥给了 B。数字签名具体实现过程如下：</p> <ol><li>A 写了一封信内容是 data，他写完后用 hash 函数生成该信件的摘要<code>digest</code></li> <li>A 将摘要<code>digest</code>用自己的私钥进行加密，生成数字签名<code>signature</code>，A 将这个数字签名<code>signature</code>附在信件 data 下面，一起发送给 B</li> <li>B 收到信息，取下数字签名<code>signature</code>，用 A 的公钥解密得到摘要<code>digest</code>，证明这封信是 A 写的</li> <li>B 再对信件本身使用 hash 函数，将得到的结果和上一步中得到的摘要<code>digest</code>进行对比，如果两者一致就证明这份信件未被修改过</li></ol> <p>数字签名好比现实生活中的签名，数字证书好比我们的身份证。使用数字签名是有可能被中间人截获的，所以建议还是使用数字证书比较安全。</p> <hr> <h2 id="访问百度的过程"><a href="#访问百度的过程" class="header-anchor">#</a> 访问百度的过程</h2> <p>C 代表 Client 客户端，S 代表 Server 服务器</p> <ol><li>C -&gt; S，客户端请求服务器，告诉服务器客户端所支持的 SSL 版本、非对称算法，并带上随机数 num1</li> <li>S -&gt; C，服务器给客户端回信，告诉客户端就使用 SSL1.0 版本，以及以后通信的对称加密算法，数字证书，并带上随机数 num2</li> <li>C 验证证书，如验证不通过，浏览器发出警告，证书不安全；验证通过则继续往下</li> <li>C -&gt; S，将前面的 num1 和 num2 使用 hash 算法<code>hash(num1,num2)</code>得到数据，假设是 xx，同时带上随机数 num3</li> <li>S 验证 xx，S 也是知道 num1 和 num2 的，拿到数据后先判断<code>hash(num1,num2)</code>是否等于 xx，不等于则说明出现问题，等于则验证通过，继续往下进行，此时 S 将前面的 num1，num2，num3 通过 hash 算法<code>hash（num1，num2，num3）</code>生成秘钥 k，存储在自己身上</li> <li>S -&gt; C，S 将前面的 num1，num2，xx 使用 hash 算法<code>hash(num1，num2，xx)</code>得到数据，假设是 zz，将 zz 返回给客户端</li> <li>C 收到数据，C 也是知道 num1，num2，xx 的，C 也使用 hash 算法<code>hash(num1，num2，xx)</code>，验证是否等于 zz，如果不等于说明出现问题，如果等于说明安全，此时 C 通过 hash 算法<code>hash（num1，num2，num3）</code>生成秘钥 k，也存储在自己身上，这个 k 和第 5 步生成的 k 是一样的</li> <li>如果以上过程都没有出现问题，则客户端和服务器可以正常通信，客户端和服务器都拿到了秘钥 k，这个秘钥 k 都是他们自己生成的，而且都是一样的，避免了在传输过程中秘钥的泄漏，之后的通信都会用到这个秘钥 k，这就保证了安全性</li></ol> <p>这个过程确实是挺复杂的，但是为了安全，这样是值得的而且非常必要的~</p> <hr> <h2 id="结束语"><a href="#结束语" class="header-anchor">#</a> 结束语</h2> <p>客户端和浏览器的通信是通过<code>HTTP</code>协议进行的，<code>HTTP</code>有一个弊端，就是所有传输的信息都是明文的，安全性几乎为 0，所以就引出了<code>HTTPS</code>进行数据加密，<code>HTTPS</code>一般会用到一些加密算法和<code>CA证书</code>（常用的证书如 SSL，TLS），从而保证数据传输的安全。如果本文中有说的不正确的地方，欢迎大佬鞭策!</p> <p><strong>参考资料：</strong></p> <p><a href="https://www.jianshu.com/p/12790cea57ac" target="_blank" rel="noopener noreferrer">简书-面试必备 HTTP 之 TCP 三次握手及四次挥手详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html" target="_blank" rel="noopener noreferrer">阮一峰-数字签名是什么？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://www.bilibili.com/video/BV1w4411m7GL" target="_blank" rel="noopener noreferrer">b 站-HTTPS 原理全解析<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/11/2021, 8:41:08 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/blog/articles/http-cache-01.html" class="prev">
        前端也要懂 HTTP 缓存机制
      </a></span> <span class="next"><a href="/blog/blog/articles/cdn-01.html">
        聊聊 CDN
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.11eaa6f7.js" defer></script><script src="/blog/assets/js/2.74b5bf19.js" defer></script><script src="/blog/assets/js/24.2ca8ec0a.js" defer></script>
  </body>
</html>
